<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">
    <link rel="shortcut icon" href="/img/logoP.png" type="image/x-icon">
    <!-- <script src="admin_page1.js"></script> -->

    <!-- Title Page-->
    <title>สวนพฤกษศาสตร์มหาวิทยาลัยแม่ฟ้าหลวง</title>
    <link href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300&display=swap" rel="stylesheet">

    <!-- Icons font CSS-->
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link
        href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Vendor CSS-->

    <link href="vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">
    <link rel="stylesheet" href="https://cdn.tailwindcss.com/3.0.12">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>



    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <link href="/css/admin_1.css" rel="stylesheet" media="all">
    <link href="/css/upload-update.css" rel="stylesheet" media="all">
    <link href="/css/sidebar.css" rel="stylesheet" media="all">


</head>

<style>
    #imageContainer {
        display: flex;
        align-items: flex-start;


    }

    #addImage {
        width: 250px;
        height: 150px;
        /* Set your desired fixed height */
        overflow-x: auto;
        /* Enable horizontal scrollbar */
        overflow-y: hidden;
        /* Hide vertical scrollbar */
        white-space: nowrap;
        display: flex;
        /* Ensure flex container for flex items */
    }

    #addImage img {
        width: auto;
        max-height: 150px;
        /* Set your desired fixed height */
        border-radius: 3em;
        padding: 1em;
        flex: 0 0 auto;
        /* Prevent images from shrinking */
    }

    #addImage::-webkit-scrollbar {
        height: 8px;
        /* Adjust the width of the scrollbar */
    }

    #addImage::-webkit-scrollbar-thumb {
        background-color: #2f835c;
        /* Thumb color */
        border-radius: 7px;
    }

    #addImage::-webkit-scrollbar-track {
        background-color: #7e817e;
        /* Track color */
        border-radius: 7px;
    }


    table {
        width: 100%;
        border-collapse: collapse;

    }

    th,
    td {
        border: none;
        padding: 12px;
        text-align: left;
        vertical-align: top;
    }

    th {
        background-color: #f2f2f2;
    }


    .topnav {
        background-color: #13564B;
    }

    .title {
        font-family: 'Kanit', sans-serif;
        color: whitesmoke;
        align-items: center;
        margin-left: 1em;
        padding-bottom: 0em;
    }

    .rows {
        margin: 0.5em;
        font-family: 'Kanit', sans-serif;
        color: whitesmoke;
        align-items: center;

        list-style-type: none;
    }

    .fa {
        padding: 20px;
        font-size: 30px;
        width: 50px;
        text-align: center;
        text-decoration: none;
        margin: 5px 2px;
    }

    .fa:hover {
        opacity: 0.7;
    }

    .fa-facebook {

        color: white;
    }

    .fa-backward {

        color: #13564B;
    }

    .fa-home {

        color: white;
    }

    .fa-instagram {

        color: white;
    }

    .fa-globe {
        color: white;
    }


    .rowsfoot {
        font-family: 'Kanit', sans-serif;

        font-size: 12px;
        list-style-type: none;
    }

    footer {
        padding-top: 1em;
        margin-top: 5em;
        width: 100%;
        height: 15%;
        background-color: #13564B;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative
    }




    .focus {

        height: 37em;
        background-size: cover;
        width: 70%;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: auto;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
    }



    .content {
        padding: 2em;
        font-family: 'Kanit', sans-serif;
        margin-top: 30em;
        width: 100%;
        background-color: #DCE6E4;
        border-radius: 20px;
        color: #13564B;

        display: flex;

    }


    .top {
        padding-left: 3em;
        display: flex;
        align-items: center;
    }

    .insearch {
        margin-left: 2em;
        width: 30em;
        height: 2.5em;
        border-radius: 2em;
        border: none;
    }

    .topic {
        border-right: 3px solid #ffffff;
        padding-right: 2em;

    }

    .show {
        margin-top: 12em;
        align-items: center;
        justify-content: center;
    }

    .result {
        margin-left: 1em;



    }



    #head {
        width: 30%;
    }

    #thaiName {
        width: 70%;
    }

    .topic a {
        text-decoration: none;
        color: #13564B;
        /* Set the color to inherit from the parent */
        font-weight: 800;
        font-family: 'Kanit', sans-serif;
        align-items: center;
    }


    .input {
        margin-left: 1em;
        margin-top: 1em;
        width: 80%;
        height: 2.5em;
        border-radius: 0.5em;
        border: none;
    }

    .input1 {
        margin-left: 1em;
        margin-top: 1em;
        width: 30%;
        height: 2.5em;
        border-radius: 0.5em;
        border: none;
    }


    .input3 {
        margin-left: 1em;
        margin-top: 1em;
        width: 80%;
        border-radius: 0.5em;
        border: none;
    }

    .input2 {

        margin-top: 1em;

    }

    .butsearch {
        margin-top: 2em;
        width: 8em;
        height: 2.5em;
        border-radius: 2em;
        color: white;
        font-weight: 800;
        border: 3px solid #ffffff;
        background: linear-gradient(#2f835c, #08350a);
    }

    .butout {
        margin-top: 0.5em;
        margin-right: 2em;
        width: 8em;
        height: 3em;
        border-radius: 1em;
        color: white;
        font-family: 'Kanit', sans-serif;
        font-weight: 200;
        border: 3px solid #ffffff;
        background-color: #08350a;
    }

    .btn{
        background-color:#13564B;
    }
    .btn:hover {
        background-color: #8b8888;
    }


    .butsearch1 {
        width: 8em;
        height: 2.5em;
        border-radius: 1em;
        color: white;
        font-weight: 800;
        border: 3px solid #ffffff;
        background-color: #2f835c;
    }

    .my-custom-popup-class {
        background-color: white !important;
    }

    #notice {
        color: red;
    }

    .crap {
        margin-bottom: 2em;
    }

    .sidenav {
        text-decoration: underline #ffffff;
    }
</style>

<body>

    <!-- ----------------------------------------------------------- ------------------------------- -->
    <!-- ----------------------------------------------------------- ------------------------------- -->

    <div class="row">

        <div class="col-1 d-flex justify-content-center">
            <div id="mySidenav" class="sidenav">
                <a href="/adminhome"><i class="bi bi-trash"></i>หน้าแรก</a>
                <!-- <a href="/admin">บันทึกข้อมูลพรรณไม้</a> -->
                <a href="/AddData">บันทึกข้อมูลพรรณไม้</a>
                <a href="/upadmin">แก้ไขข้อมูลพรรณไม้</a>
                <a href="/AddData2">บันทึกข้อมูลตัวอย่างพรรณไม้</a>        
                <a href="/upadmintwo">แก้ไขข้อมูลตัวอย่างพรรณไม้</a>
            </div>
        </div>
    </div>
    <!--Navbar-->
    <nav class="navbar">

        <button class="navbar-toggler hamburger-button" type="button" data-toggle="collapse" aria-expanded="false"
            aria-label="Toggle navigation" onclick="Nav()" style="z-index: 2">
            <div class="animated-icon"><span></span><span></span><span></span></div>
        </button>

        <button type="button" class="butout" onclick="redirectToPath('/');">ออกจากระบบ</button>
    </nav>


    <div class="page-wrapper bg-gra-02 p-t-130 p-b-100 font-poppins">
        <div class="wrapper wrapper--w680" id="wid">
            <div class="card card-4 ">
                <div class="card-body">
                    <div class="row crap">
                        <button class="btn btn--radius-2 button_hover"
                            style="font-family  : 'Kanit', sans-serif;" 
                            onclick="redirectToPath('/AddData');">บันทึกข้อมูลพรรณไม้</button>
                    </div>
                    <div class="row crap">
                        <button class="btn btn--radius-2 button_hover"
                            style="font-family: 'Kanit', sans-serif; "
                            onclick="redirectToPath('/upadmin');">แก้ไขข้อมูลพรรณไม้</button>
                    </div>
                    <div class="row crap">
                        <button class="btn btn--radius-2 button_hover"
                            style="font-family: 'Kanit', sans-serif; " 
                            onclick="redirectToPath('/AddData2');">บันทึกข้อมูลตัวอย่างพรรณไม้</button>
                    </div>
                    
                    <div class="row crap">
                        <button class="btn btn--radius-2 button_hover"
                            style="font-family: 'Kanit', sans-serif;"
                            onclick="redirectToPath('/upadmintwo');">แก้ไขข้อมูลตัวอย่างพรรณไม้</button>
                    </div>
                </div>


            </div>
        </div>
    </div>







</body>

<script>
    function Nav() {
        var width = document.getElementById("mySidenav").style.width;
        if (width === "0px" || width == "") {
            document.getElementById("mySidenav").style.width = "300px";
            $('.animated-icon').toggleClass('open');
        }
        else {
            document.getElementById("mySidenav").style.width = "0px";
            $('.animated-icon').toggleClass('open');
        }
    }
    function redirectToPath(path) {
        window.location.href = path;
    }

    /////////////////////////// Add data to DB/////////////////////////////////
    /////////////////////////// Add data to DB/////////////////////////////////
    function uploadImages() {

        const inputElement = document.getElementById('imageInput');
        const files = inputElement.files;
        let X = 'noImg.jpg';
        const formData = new FormData();

        const imgName = 'noImg.jpg';

        console.log(files);


        if (!files.length) {
            // alert('Please select one or more images to upload.')


            // return;
            // formData.append('no Img.');
            // alert('555');
            // return

            // Get form data
            const Scientific_Name = document.getElementById('Scientific_Name1').value;


            // Create a data object to send to the server
            const data = {
                Scientific_Name: Scientific_Name,
            };

            // const data = {img: imgName};

            fetch('/upload_noImg', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    // You can handle the server response here
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }




        else {


            for (const file of files) {
                formData.append('images', file);
            }

            // const jsonString = JSON.stringify(myVariable , null, 2);
            // console.log(jsonString);


            fetch('/upload', {
                method: 'POST',
                body: formData
            })


                .then(response => {

                    if (response.ok) {
                        console.log('Images uploaded successfully');
                    } else {
                        console.error('Failed to upload images');
                    }
                })
                .catch(error => {
                    console.error('Error during image upload:', error);
                });

        }
    }




    function submitForm() {
        // Get form data
        const Scientific_Name1 = document.getElementById('Scientific_Name1').value;
        const Scientific_Name2 = document.getElementById('Scientific_Name2').value;
        const Familly = document.getElementById('Familly').value;
        const Name_TH = document.getElementById('Name-TH').value;
        const Name_EN = document.getElementById('Name-EN').value;
        const Location_TH = document.getElementById('Location-TH').value;
        const Location_EN = document.getElementById('Location-EN').value;
        const Ecology_TH = document.getElementById('Ecology-TH').value;
        const Ecology_EN = document.getElementById('Ecology-EN').value;
        const OtherName_TH = document.getElementById('OtherName-TH').value;
        const OtherName_EN = document.getElementById('OtherName-EN').value;
        const Distribution_TH = document.getElementById('Distribution-TH').value;
        const Distribution_EN = document.getElementById('Distribution-EN').value;
        const Utilization_TH = document.getElementById('Utilization-TH').value;
        const Utilization_EN = document.getElementById('Utilization-EN').value;
        const Flowering_period_TH = document.getElementById('Flowering_period-TH').value;
        const Flowering_period_EN = document.getElementById('Flowering_period-EN').value;
        const Fruiting_period_TH = document.getElementById('Fruiting_period-TH').value;
        const Fruiting_period_EN = document.getElementById('Fruiting_period-EN').value;
        const Characteristics_TH = document.getElementById('Characteristics-TH').value;
        const Characteristics_EN = document.getElementById('Characteristics-EN').value;
        const CommonName = document.getElementById('commonName').value;





        // Create a data object to send to the server
        const data = {

            Name: { TH: Name_TH, EN: Name_EN },
            OtherName: { TH: OtherName_TH, EN: OtherName_EN },
            ScientificName: { I: Scientific_Name1, II: Scientific_Name2 },
            FamilyName: Familly,
            Characteristics: { TH: Characteristics_TH, EN: Characteristics_EN },
            Ecology: { TH: Ecology_TH, EN: Ecology_EN },
            Distribution: { TH: Distribution_TH, EN: Distribution_EN },
            Utilization: { TH: Utilization_TH, EN: Utilization_EN },
            FloweringTime: { TH: Flowering_period_TH, EN: Flowering_period_EN },
            FruitingTime: { TH: Fruiting_period_TH, EN: Fruiting_period_EN },
            Location: { TH: Location_TH, EN: Location_EN },
            commonName: CommonName,
        };


        if (Scientific_Name1 == "") {
            Swal.fire({
                title: 'โปรดกรอกข้อมูล',
                icon: 'info',
                customClass: {
                    popup: 'my-custom-popup-class', // Optional custom class for the popup
                },
                css: {
                    color: 'black', // Set your desired text color for the title
                }
            });
            return

        }

        else {
            // Send data to the server using fetch
            fetch('/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => response.json())

                // .then(response => response.text())

                .then(data => {
                    // console.log('Success:', data);
                    // You can handle the server response here


                    if (data == '1') {
                        Swal.fire({
                            position: "top-end",
                            icon: "success",
                            title: "บันทึกสำเร็จ",
                            showConfirmButton: false,
                            timer: 1500,
                            customClass: {
                                popup: 'my-custom-popup-class', // Optional custom class for the popup
                            },
                            css: {
                                color: 'black', // Set your desired text color for the title
                            }
                        })
                            .then(() => {
                                // Refresh the page after the Swal success message is closed
                                location.reload();
                            });
                    }


                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }

        send_ScientificName();
        uploadImages();



    }




    function send_ScientificName() {
        // Get form data
        const Scientific_Name = document.getElementById('Scientific_Name1').value;


        // Create a data object to send to the server
        const data = {
            Scientific_Name: Scientific_Name,
        };

        // Send data to the server using fetch
        fetch('/scienceName', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                // You can handle the server response here
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    }        
</script>

</html>
<!-- end document-->